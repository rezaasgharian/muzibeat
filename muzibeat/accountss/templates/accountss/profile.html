{% load static %}
<!DOCTYPE html>
<html lang="en">
    <head>
        <title>
            muzibeat|main page
        </title>
        <!-- CSS only -->
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/css/bootstrap.min.css" rel="stylesheet"
              integrity="sha384-F3w7mX95PdgyTmZZMECAngseQB83DfGTowi0iMjiWaeVhAn4FJkqJByhZMI3AhiU" crossorigin="anonymous">
        <!-- JavaScript Bundle with Popper -->
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/js/bootstrap.bundle.min.js"
                integrity="sha384-/bQdsTh/da6pkI1MST/rWKFNjaCP5gBSY4sEBT38Q/9RBh9AH40zEOg7Hlq2THRZ"
                crossorigin="anonymous"></script>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    </head>
    <link
            rel="stylesheet"
            href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"

    />
    <link rel="stylesheet" href="{% static 'account/css/styles.css' %}"/>
    <link rel="stylesheet" href="assets/css/audioplayer.css">
    <link href="assets/plugins/font-awesome/css/all.css" rel="stylesheet"> <!--load all styles -->
    <link href="assets/plugins/font-awesome/css/brands.css" rel="stylesheet"> <!--load all styles -->
    <link href="assets/plugins/font-awesome/css/solid.css" rel="stylesheet"> <!--load all styles -->


    <body>
    <header>
        <div class="container" style="height:100%">
            <nav class="align-content-center align-items-center">
                <div>
                    <a href="login.html">Login</a>
                    <a href="register.html">Register</a>
                </div>
                <div>
                    <a href="about-us.html">about us</a>
                    <a href="contact-us.html">contact us</a>
                    <a href="notes.html">notes</a>
                    <a href="texts.html">texts</a>
                    <a href="songs.html">songs</a>
                    <a href="index.html">Home</a>
                </div>

            </nav>
          </div>
    </header>

 <div class="container" >
  <div class="row">
   <div class="col-md-4" style="margin-top:200px;background-color:#fff;border-radius:10px;">
     <div class="profile-info">
      <img src="assets/images/user.png" width="100px" height="100px" alt="">
      <h5 class="my-2">
        {{ profile.user.username }}
      </h5>
      <p class="bio text-muted">
        {{ profile.desc }}
     </p>
      <a href="#" class="btn btn-success form-control">follow <span class="m-2"></span></a>
      <a href="#" class="btn btn-success form-control">block <span class="m-2"></span></a>
      <a href="#" class="btn btn-warning form-control mt-2">like<i class="m-2 far fa-thumbs-up"></i>
      <a href="{% url 'accountss:update' %}" class="btn btn-dark form-control mt-2">update profile<i class="m-2 fa fa-edit"></i>
      <a href="{% url 'accountss:change' %}" class="btn btn-dark form-control mt-2">change password<i class="m-2 fas fa-user-lock"></i>
      </i></a>
      <a href="{% url 'accountss:postuser' %}" class="btn btn-dark form-control mt-2">create post<i class="m-2 far fa-plus-square"></i>



      </a>

     </div>
   </div>
   <div class="col-md-8" style="margin-top:200px">

   {% for post in posts %}

   <div class="user-posts mt-5">
    <article>





   {% if user == post.user_id%}
   <h1>
    {{ post.title }}
   </h1>
   <hr>
   <p>
    {{ post.description}}
   </p>
   <div class="user-post-images">
{% for image in images %}
   {% if image.post_id == post.id %}
<img src="{{ image.thumbnail.url }}" class="user-post-image" alt="">

   {% endif %}
{% endfor %}
</div>
<div class="user-post-videos">


{% for video in videos %}
   {% if video.post_id == post.id %}
   <div class="user-post-video">

    <video controls>
     <source src="{{ video.file}}"/>
    </video>

   </div>
   {% endif %}

{% endfor %}
</div>
<div class="user-post-voices">
  {% for voice in voices %}
   {% if voice.post_id == post.id %}
<div class="user-post-voice">
   <audio controls>
   <source src="{{voice.file}}">
   </audio>
  </div>
  {% endif %}
  {% endfor %}
   {% endif %}
{% endfor %}

</article>
</div>
 </div>


   </div>
  </div>
 </div>


 <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.10.2/dist/umd/popper.min.js" integrity="sha384-7+zCNj/IqJ95wo16oMtfsKbZ9ccEh31eOz1HGyDuCQ6wgnyJNSYdrPa03rtR1zdB" crossorigin="anonymous"></script>
 <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.min.js" integrity="sha384-QJHtvGhmr9XOIpI6YVutG+2QOK9T+ZnN4kzFN1RtK3zEFEIsxhlmWl5/YESvpZ13" crossorigin="anonymous"></script>
 <script src="assets/js/audioplayer.js"></script>

<script>
      let follow = document.getElementById("follow");
            follow.addEventListener("click",function(e){
                let user_id = follow.getAttribute("data-id");
                let body = {
                    user_id : user_id,
                    csrfmiddlewaretoken: '{{ csrf_token }}'
                }
                e.preventDefault();
                $.post("{% url 'accountss:follow' %}",body , function(response){
                if (response == "followed"){
                    document.getElementById("follow").innerHTML = "followed"
                }else{
                    // alert("dissliked")
                    document.getElementById("follow").innerHTML = "unfollow"
                }
});
            })

      let block = document.getElementById("block");
            block.addEventListener("click",function(e){
                let user_id = block.getAttribute("data-id");
                let body = {
                    user_id : user_id,
                    csrfmiddlewaretoken: '{{ csrf_token }}'
                }
                e.preventDefault();
                $.post("{% url 'account:block' %}",body , function(response){
                if (response == "blocked"){
                    document.getElementById("block").innerHTML = "blocked"
                }else{
                    document.getElementById("block").innerHTML = "unblocked"
                }
});
            })


  $('audio').audioPlayer({

classPrefix:'audioplayer',

strPlay:'',

strPause:'',

strVolume:''

});
</script>
</body>
</html>