
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title> Profile </title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

</head>
<body>

    {% csrf_token %}
    <h1> Profile </h1>
<table>

    <tr>
        <th> {{ profile.user.username }} </th>
    </tr>
    <tr>
        <th> {{ profile.user.email }} </th>
    </tr>
    <tr>
        {{ profile.desc }}
    </tr>
        {{profile.status}}
    <tr>
        <img src="/media/{{ profile.image }}" width="200" height="200" style="border-radius: 50%"/>
    </tr>

</table>
        <a href="{% url 'account:update' %}"> Update </a>
        <a href="{% url 'account:follow' %}" id="follow" data-id="{{profile.user.id}}"> follow </a>
    <br>
        <a href="{% url 'account:change' %}"> Change Password </a>
    <br>
        <a href="{% url 'account:postuser' %}"> Create post </a>
    <br>
        <a href="{% url 'account:User_post'  user.user_id  %}">Post</a>
    <br>


<script>
            let follow = document.getElementById("follow");
            follow.addEventListener("click",function(e){
                let user_id = follow.getAttribute("data-id");
                let body = {
                    user_id : user_id,
                    csrfmiddlewaretoken: '{{ csrf_token }}'
                }
                e.preventDefault();
                $.post("{% url 'account:follow' %}",body , function(response){
                if (response == "followed"){
                    document.getElementById("follow").innerHTML = "followed"
                }else{
                    // alert("dissliked")
                    document.getElementById("follow").innerHTML = "unfollow"
                }
});
            })



</script>
</body>
</html>